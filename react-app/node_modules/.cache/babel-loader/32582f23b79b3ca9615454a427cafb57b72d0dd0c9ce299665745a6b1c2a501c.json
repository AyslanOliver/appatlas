{"ast":null,"code":"import axios from'axios';// Configuração da API - função que retorna a URL baseada no ambiente atual\nfunction getApiUrl(){// Se estiver rodando no Cordova (protocolo file:), usar a API do InfinityFree\nif(typeof window!=='undefined'&&window.location.protocol==='file:'){return'https://rotaexpress.free.nf';// URL do seu domínio\n}// Detectar o ambiente baseado no hostname\nif(typeof window!=='undefined'){const hostname=window.location.hostname;// Para desenvolvimento local, usar servidor local\nconst isLocal=hostname==='localhost'||hostname==='127.0.0.1';if(isLocal){return'http://localhost:3001';}// Se estiver no InfinityFree, usar a API local\nif(hostname.includes('infinityfreeapp.com')||hostname.includes('epizy.com')||hostname==='rotaexpress.free.nf'){return window.location.origin;}}// Fallback para InfinityFree\nreturn'https://rotaexpress.free.nf';// URL do seu domínio\n}// Configuração do axios\nconst API_URL=getApiUrl();const api=axios.create({baseURL:API_URL,timeout:15000,// Aumentado para InfinityFree\nheaders:{'Content-Type':'application/json'}});// Debug: Log da configuração da API\nconsole.log('API_URL configurado:',API_URL);if(typeof window!=='undefined'){console.log('Protocolo atual:',window.location.protocol);console.log('Hostname atual:',window.location.hostname);console.log('Ambiente detectado:',window.location.protocol==='file:'?'Cordova':window.location.hostname.includes('infinityfreeapp.com')||window.location.hostname.includes('epizy.com')||window.location.hostname==='rotaexpress.free.nf'?'InfinityFree':window.location.hostname==='localhost'||window.location.hostname==='127.0.0.1'?'Local':'Outro');}console.log('Build timestamp:',new Date().toISOString());// Função para testar a conexão com a API\nexport const testarConexao=async()=>{try{const response=await api.get('/api/test');return response.data;}catch(error){console.error('Erro ao testar conexão:',error);throw error;}};// Funções para gerenciamento de produtos\nexport const getProdutos=async()=>{try{const response=await api.get('/api/produtos');return response.data;}catch(error){console.error('Erro ao buscar produtos:',error);throw error;}};export const criarProduto=async dados=>{try{const response=await api.post('/api/produtos',dados);return response.data;}catch(error){console.error('Erro ao criar produto:',error);throw error;}};export const atualizarProduto=async(id,dados)=>{try{const response=await api.put(\"/api/produtos/\".concat(id),dados);return response.data;}catch(error){console.error('Erro ao atualizar produto:',error);throw error;}};export const deletarProduto=async id=>{try{const response=await api.delete(\"/api/produtos/\".concat(id));return response.data;}catch(error){console.error('Erro ao deletar produto:',error);throw error;}};// Funções para gerenciamento de pedidos\nexport const getPedidos=async()=>{try{const response=await api.get('/api/pedidos');return response.data;}catch(error){console.error('Erro ao buscar pedidos:',error);throw error;}};export const getPedidoById=async id=>{try{const response=await api.get(\"/api/pedidos/\".concat(id));return response.data;}catch(error){console.error('Erro ao buscar pedido:',error);throw error;}};export const criarPedido=async pedido=>{try{const response=await api.post('/api/pedidos',pedido);return response.data;}catch(error){console.error('Erro ao criar pedido:',error);throw error;}};export const atualizarPedido=async(id,dados)=>{try{const response=await api.put(\"/api/pedidos/\".concat(id),dados);return response.data;}catch(error){console.error('Erro ao atualizar pedido:',error);throw error;}};export const deletarPedido=async id=>{try{const response=await api.delete(\"/api/pedidos/\".concat(id));return response.data;}catch(error){console.error('Erro ao deletar pedido:',error);throw error;}};export const deletarTodosPedidos=async()=>{try{const response=await api.delete('/api/pedidos?deleteAll=true');return response.data;}catch(error){console.error('Erro ao deletar todos os pedidos:',error);throw error;}};export const getCardapio=async function(){let tipo=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';try{const url=tipo?\"/api/cardapio?tipo=\".concat(tipo):'/api/cardapio';const response=await api.get(url);return response.data;}catch(error){console.error('Erro ao buscar cardápio:',error);throw error;}};export default api;","map":{"version":3,"names":["axios","getApiUrl","window","location","protocol","hostname","isLocal","includes","origin","API_URL","api","create","baseURL","timeout","headers","console","log","Date","toISOString","testarConexao","response","get","data","error","getProdutos","criarProduto","dados","post","atualizarProduto","id","put","concat","deletarProduto","delete","getPedidos","getPedidoById","criarPedido","pedido","atualizarPedido","deletarPedido","deletarTodosPedidos","getCardapio","tipo","arguments","length","undefined","url"],"sources":["E:/appatlas/react-app/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\n// Configuração da API - função que retorna a URL baseada no ambiente atual\nfunction getApiUrl() {\n    // Se estiver rodando no Cordova (protocolo file:), usar a API do InfinityFree\n    if (typeof window !== 'undefined' && window.location.protocol === 'file:') {\n        return 'https://rotaexpress.free.nf'; // URL do seu domínio\n    }\n    \n    // Detectar o ambiente baseado no hostname\n    if (typeof window !== 'undefined') {\n        const hostname = window.location.hostname;\n        \n        // Para desenvolvimento local, usar servidor local\n        const isLocal = hostname === 'localhost' || hostname === '127.0.0.1';\n        if (isLocal) {\n            return 'http://localhost:3001';\n        }\n        \n        // Se estiver no InfinityFree, usar a API local\n        if (hostname.includes('infinityfreeapp.com') || hostname.includes('epizy.com') || hostname === 'rotaexpress.free.nf') {\n            return window.location.origin;\n        }\n    }\n    \n    // Fallback para InfinityFree\n    return 'https://rotaexpress.free.nf'; // URL do seu domínio\n}\n\n// Configuração do axios\nconst API_URL = getApiUrl();\nconst api = axios.create({\n    baseURL: API_URL,\n    timeout: 15000, // Aumentado para InfinityFree\n    headers: {\n        'Content-Type': 'application/json',\n    }\n});\n\n// Debug: Log da configuração da API\nconsole.log('API_URL configurado:', API_URL);\nif (typeof window !== 'undefined') {\n    console.log('Protocolo atual:', window.location.protocol);\n    console.log('Hostname atual:', window.location.hostname);\n    console.log('Ambiente detectado:', \n        window.location.protocol === 'file:' ? 'Cordova' : \n        window.location.hostname.includes('infinityfreeapp.com') || window.location.hostname.includes('epizy.com') || window.location.hostname === 'rotaexpress.free.nf' ? 'InfinityFree' : \n        window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1' ? 'Local' : 'Outro'\n    );\n}\nconsole.log('Build timestamp:', new Date().toISOString());\n\n// Função para testar a conexão com a API\nexport const testarConexao = async () => {\n    try {\n        const response = await api.get('/api/test');\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao testar conexão:', error);\n        throw error;\n    }\n};\n\n// Funções para gerenciamento de produtos\nexport const getProdutos = async () => {\n    try {\n        const response = await api.get('/api/produtos');\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao buscar produtos:', error);\n        throw error;\n    }\n};\n\nexport const criarProduto = async (dados) => {\n    try {\n        const response = await api.post('/api/produtos', dados);\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao criar produto:', error);\n        throw error;\n    }\n};\n\nexport const atualizarProduto = async (id, dados) => {\n    try {\n        const response = await api.put(`/api/produtos/${id}`, dados);\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao atualizar produto:', error);\n        throw error;\n    }\n};\n\nexport const deletarProduto = async (id) => {\n    try {\n        const response = await api.delete(`/api/produtos/${id}`);\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao deletar produto:', error);\n        throw error;\n    }\n};\n\n// Funções para gerenciamento de pedidos\nexport const getPedidos = async () => {\n    try {\n        const response = await api.get('/api/pedidos');\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao buscar pedidos:', error);\n        throw error;\n    }\n};\n\nexport const getPedidoById = async (id) => {\n    try {\n        const response = await api.get(`/api/pedidos/${id}`);\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao buscar pedido:', error);\n        throw error;\n    }\n};\n\nexport const criarPedido = async (pedido) => {\n    try {\n        const response = await api.post('/api/pedidos', pedido);\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao criar pedido:', error);\n        throw error;\n    }\n};\n\nexport const atualizarPedido = async (id, dados) => {\n    try {\n        const response = await api.put(`/api/pedidos/${id}`, dados);\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao atualizar pedido:', error);\n        throw error;\n    }\n};\n\nexport const deletarPedido = async (id) => {\n    try {\n        const response = await api.delete(`/api/pedidos/${id}`);\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao deletar pedido:', error);\n        throw error;\n    }\n};\n\nexport const deletarTodosPedidos = async () => {\n    try {\n        const response = await api.delete('/api/pedidos?deleteAll=true');\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao deletar todos os pedidos:', error);\n        throw error;\n    }\n};\n\nexport const getCardapio = async (tipo = '') => {\n    try {\n        const url = tipo ? `/api/cardapio?tipo=${tipo}` : '/api/cardapio';\n        const response = await api.get(url);\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao buscar cardápio:', error);\n        throw error;\n    }\n};\n\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}