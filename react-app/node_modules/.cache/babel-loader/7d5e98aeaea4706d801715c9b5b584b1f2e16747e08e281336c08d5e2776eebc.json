{"ast":null,"code":"import axios from'axios';// Configuração da API - função que retorna a URL baseada no ambiente atual\nfunction getApiUrl(){// Se estiver rodando no Cordova (protocolo file:), usar o servidor local\nif(typeof window!=='undefined'&&window.location.protocol==='file:'){return'http://localhost:3001';}// Detectar o ambiente baseado no hostname - v2.1\nif(typeof window!=='undefined'){const hostname=window.location.hostname;const isLocal=hostname==='localhost'||hostname==='127.0.0.1';if(isLocal){// Em desenvolvimento local, usar o servidor local\nreturn'http://localhost:3001';}else if(hostname==='rotaexpress.free.nf'){// Em produção no InfinityFree, usar a API local\nreturn'https://rotaexpress.free.nf/api';}}// Outros ambientes de produção (Vercel, etc.) ou fallback\nreturn'https://appatlas-afusc3hg5-ayslanoons-projects.vercel.app/api';}// Configuração do axios\nconst api=axios.create({timeout:10000,headers:{'Content-Type':'application/json'}});// Interceptor para definir a baseURL dinamicamente\napi.interceptors.request.use(config=>{const API_URL=getApiUrl();config.baseURL=API_URL;// Debug: Log da configuração da API\nconsole.log('API_URL configurado:',API_URL);if(typeof window!=='undefined'){console.log('Protocolo atual:',window.location.protocol);console.log('Hostname atual:',window.location.hostname);console.log('Ambiente detectado:',window.location.protocol==='file:'?'Cordova':'Web');}console.log('Build timestamp:',new Date().toISOString());return config;});// Função para testar a conexão com a API\nexport const testarConexao=async()=>{try{await api.get('/produtos');console.log('Conexão com a API estabelecida com sucesso!');return true;}catch(error){console.error('Erro de conexão:',error);throw new Error('Erro ao conectar com o servidor. Verifique se a API está rodando.');}};// Funções para gerenciamento de produtos\nexport const getProdutos=async()=>{try{const response=await api.get('/produtos');return response.data;}catch(error){console.error('Erro ao buscar produtos:',error);throw error;}};export const criarProduto=async dados=>{try{const response=await api.post('/produtos',dados);return response.data;}catch(error){console.error('Erro ao criar produto:',error);throw error;}};export const atualizarProduto=async(id,dados)=>{try{const response=await api.put(\"/produtos/\".concat(id),dados);return response.data;}catch(error){console.error('Erro ao atualizar produto:',error);throw error;}};export const deletarProduto=async id=>{try{const response=await api.delete(\"/produtos/\".concat(id));return response.data;}catch(error){console.error('Erro ao deletar produto:',error);throw error;}};// Funções para gerenciamento de pedidos\nexport const getPedidos=async()=>{try{const response=await api.get('/pedidos');return response.data;}catch(error){console.error('Erro ao buscar pedidos:',error);throw error;}};export const getPedidoById=async id=>{try{const response=await api.get(\"/pedidos/\".concat(id));return response.data;}catch(error){console.error('Erro ao buscar pedido:',error);throw error;}};export const criarPedido=async pedido=>{try{const response=await api.post('/pedidos',pedido);return response.data;}catch(error){console.error('Erro ao criar pedido:',error);throw error;}};export const atualizarPedido=async(id,dados)=>{try{const response=await api.put(\"/pedidos/\".concat(id),dados);return response.data;}catch(error){console.error('Erro ao atualizar pedido:',error);throw error;}};export const deletarPedido=async id=>{try{const response=await api.delete(\"/pedidos/\".concat(id));return response.data;}catch(error){console.error('Erro ao deletar pedido:',error);throw error;}};export const deletarTodosPedidos=async()=>{try{const response=await api.delete('/pedidos?deleteAll=true');return response.data;}catch(error){console.error('Erro ao deletar todos os pedidos:',error);throw error;}};export const getCardapio=async function(){let tipo=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';try{const url=tipo?\"/cardapio?tipo=\".concat(tipo):'/cardapio';const response=await api.get(url);return response.data;}catch(error){console.error('Erro ao buscar cardápio:',error);throw error;}};export default api;","map":{"version":3,"names":["axios","getApiUrl","window","location","protocol","hostname","isLocal","api","create","timeout","headers","interceptors","request","use","config","API_URL","baseURL","console","log","Date","toISOString","testarConexao","get","error","Error","getProdutos","response","data","criarProduto","dados","post","atualizarProduto","id","put","concat","deletarProduto","delete","getPedidos","getPedidoById","criarPedido","pedido","atualizarPedido","deletarPedido","deletarTodosPedidos","getCardapio","tipo","arguments","length","undefined","url"],"sources":["E:/appatlas/react-app/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\n// Configuração da API - função que retorna a URL baseada no ambiente atual\nfunction getApiUrl() {\n    // Se estiver rodando no Cordova (protocolo file:), usar o servidor local\n    if (typeof window !== 'undefined' && window.location.protocol === 'file:') {\n        return 'http://localhost:3001';\n    }\n    \n    // Detectar o ambiente baseado no hostname - v2.1\n    if (typeof window !== 'undefined') {\n        const hostname = window.location.hostname;\n        const isLocal = hostname === 'localhost' || hostname === '127.0.0.1';\n        \n        if (isLocal) {\n            // Em desenvolvimento local, usar o servidor local\n            return 'http://localhost:3001';\n        } else if (hostname === 'rotaexpress.free.nf') {\n            // Em produção no InfinityFree, usar a API local\n            return 'https://rotaexpress.free.nf/api';\n        }\n    }\n    \n    // Outros ambientes de produção (Vercel, etc.) ou fallback\n    return 'https://appatlas-afusc3hg5-ayslanoons-projects.vercel.app/api';\n}\n\n// Configuração do axios\nconst api = axios.create({\n    timeout: 10000,\n    headers: {\n        'Content-Type': 'application/json',\n    }\n});\n\n// Interceptor para definir a baseURL dinamicamente\napi.interceptors.request.use((config) => {\n    const API_URL = getApiUrl();\n    config.baseURL = API_URL;\n    \n    // Debug: Log da configuração da API\n    console.log('API_URL configurado:', API_URL);\n    if (typeof window !== 'undefined') {\n        console.log('Protocolo atual:', window.location.protocol);\n        console.log('Hostname atual:', window.location.hostname);\n        console.log('Ambiente detectado:', window.location.protocol === 'file:' ? 'Cordova' : 'Web');\n    }\n    console.log('Build timestamp:', new Date().toISOString());\n    \n    return config;\n});\n\n// Função para testar a conexão com a API\nexport const testarConexao = async () => {\n    try {\n        await api.get('/produtos');\n        console.log('Conexão com a API estabelecida com sucesso!');\n        return true;\n    } catch (error) {\n        console.error('Erro de conexão:', error);\n        throw new Error('Erro ao conectar com o servidor. Verifique se a API está rodando.');\n    }\n};\n\n// Funções para gerenciamento de produtos\nexport const getProdutos = async () => {\n    try {\n        const response = await api.get('/produtos');\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao buscar produtos:', error);\n        throw error;\n    }\n};\n\nexport const criarProduto = async (dados) => {\n    try {\n        const response = await api.post('/produtos', dados);\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao criar produto:', error);\n        throw error;\n    }\n};\n\nexport const atualizarProduto = async (id, dados) => {\n    try {\n        const response = await api.put(`/produtos/${id}`, dados);\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao atualizar produto:', error);\n        throw error;\n    }\n};\n\nexport const deletarProduto = async (id) => {\n    try {\n        const response = await api.delete(`/produtos/${id}`);\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao deletar produto:', error);\n        throw error;\n    }\n};\n\n// Funções para gerenciamento de pedidos\nexport const getPedidos = async () => {\n    try {\n        const response = await api.get('/pedidos');\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao buscar pedidos:', error);\n        throw error;\n    }\n};\n\nexport const getPedidoById = async (id) => {\n    try {\n        const response = await api.get(`/pedidos/${id}`);\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao buscar pedido:', error);\n        throw error;\n    }\n};\n\nexport const criarPedido = async (pedido) => {\n    try {\n        const response = await api.post('/pedidos', pedido);\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao criar pedido:', error);\n        throw error;\n    }\n};\n\nexport const atualizarPedido = async (id, dados) => {\n    try {\n        const response = await api.put(`/pedidos/${id}`, dados);\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao atualizar pedido:', error);\n        throw error;\n    }\n};\n\nexport const deletarPedido = async (id) => {\n    try {\n        const response = await api.delete(`/pedidos/${id}`);\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao deletar pedido:', error);\n        throw error;\n    }\n};\n\nexport const deletarTodosPedidos = async () => {\n    try {\n        const response = await api.delete('/pedidos?deleteAll=true');\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao deletar todos os pedidos:', error);\n        throw error;\n    }\n};\n\nexport const getCardapio = async (tipo = '') => {\n    try {\n        const url = tipo ? `/cardapio?tipo=${tipo}` : '/cardapio';\n        const response = await api.get(url);\n        return response.data;\n    } catch (error) {\n        console.error('Erro ao buscar cardápio:', error);\n        throw error;\n    }\n};\n\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}